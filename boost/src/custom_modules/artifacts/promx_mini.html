<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Promx Artifact</title><style>*{box-sizing:border-box}body{color:#e0e0e0;background:#2a2a2a;flex-direction:column;width:100vw;height:100vh;margin:0;padding:0;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,sans-serif;display:flex;overflow:hidden}.icon{filter:invert() brightness(.8)}#controllerContainer{backdrop-filter:blur(10px);background:#191919cc;flex:1;width:100%;min-height:0;position:relative}#moodCanvas{cursor:pointer;filter:drop-shadow(0 0 20px #ffffff0d);border:none;width:100%;height:100%;display:block}#moodValues{box-sizing:border-box;backdrop-filter:blur(20px);background:#2b2b2b;flex-shrink:0;width:100%;height:260px;padding:20px 24px;overflow:hidden}#moodValues h3{color:#f0f0f0;letter-spacing:.5px;text-shadow:0 2px 4px #0000004d;margin-top:0;margin-bottom:16px;font-size:18px;font-weight:700}#emotionValueList{grid-template-columns:repeat(3,1fr);align-content:start;gap:12px 16px;height:calc(100% - 50px);margin:0;padding:0;list-style-type:none;display:grid}.emotion-value-item{backdrop-filter:blur(10px);background:#ffffff0d;border-radius:12px;align-items:center;min-height:30px;margin-bottom:0;padding:6px 10px;font-size:14px;transition:all .3s cubic-bezier(.4, 0, .2, 1);display:flex;position:relative;overflow:hidden}.emotion-value-item:before{content:"";opacity:0;background:#ffffff05;transition:opacity .3s;position:absolute;inset:0}.emotion-value-item:hover{border-color:#ffffff26;box-shadow:0 4px 12px #0006}.emotion-value-item:hover:before{opacity:1}.emotion-icon{text-align:center;filter:drop-shadow(0 1px 2px #00000080);width:20px;margin-right:10px;font-size:18px;display:inline-block}.emotion-name{color:#d0d0d0;letter-spacing:.3px;width:70px;font-weight:600;display:inline-block}.emotion-bar-container{background:#ffffff14;border-radius:8px;flex-grow:1;height:12px;margin:0 10px;position:relative;overflow:hidden;box-shadow:inset 0 1px 3px #0000004d}.emotion-bar{background:var(--bar-color,#4caf50);border-radius:8px;height:100%;transition:all .4s cubic-bezier(.4, 0, .2, 1);position:relative;box-shadow:0 1px 3px #0003}.emotion-bar:after{content:"";background:#ffffff26;border-radius:8px 8px 0 0;height:50%;position:absolute;top:0;left:0;right:0}.emotion-value-text{text-align:right;color:#f0f0f0;letter-spacing:.5px;text-shadow:0 1px 2px #00000080;min-width:36px;font-size:12px;font-weight:700}.boost-status{color:#222;z-index:1000;backdrop-filter:blur(5px);background:#ffffffbf;border-radius:14px;padding:.75rem 1.5rem;font-size:14px;font-weight:600;position:absolute;top:1rem;left:50%;transform:translateX(-50%)}.boost-controls{gap:1rem;display:flex;position:absolute;top:1rem;left:1rem}.boost-control{color:#fff;cursor:pointer;background:#ffffff1a;border:none;border-radius:14px;padding:.5rem 1.5rem;font-size:14px;font-weight:600;transition:background-color .3s,transform .2s}.boost-control:hover{background:#fff3;transform:translateY(-2px)}.boost-control:active{transform:translateY(0)}.connection-indicator{background-color:#999;border-radius:50%;width:12px;height:12px;transition:all .3s;position:absolute;top:1rem;right:1rem;box-shadow:0 0 5px #9992}.connection-indicator.connected{background-color:#4caf50;box-shadow:0 0 16px #4caf50}.connection-indicator.error{background-color:#f44336;box-shadow:0 0 16px #f44336}@media (width <= 768px){#emotionValueList{grid-template-columns:repeat(2,1fr);gap:8px 12px}#moodValues{height:300px}}</style></head><body><div id="controllerContainer"><canvas id="moodCanvas"></canvas></div><div id="moodValues"><ul id="emotionValueList"></ul></div><div class="boost-status"></div><div class="boost-controls"><div class="boost-control play-pause"><img class="icon" alt="Pause" src="data:image/svg+xml;base64,PCEtLSBAbGljZW5zZSBsdWNpZGUtc3RhdGljIHYwLjUyMi4wIC0gSVNDIC0tPgo8c3ZnCiAgY2xhc3M9Imx1Y2lkZSBsdWNpZGUtcGF1c2UiCiAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iY3VycmVudENvbG9yIgogIHN0cm9rZS13aWR0aD0iMiIKICBzdHJva2UtbGluZWNhcD0icm91bmQiCiAgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIKPgogIDxyZWN0IHg9IjE0IiB5PSI0IiB3aWR0aD0iNCIgaGVpZ2h0PSIxNiIgcng9IjEiIC8+CiAgPHJlY3QgeD0iNiIgeT0iNCIgd2lkdGg9IjQiIGhlaWdodD0iMTYiIHJ4PSIxIiAvPgo8L3N2Zz4K"></div><div class="boost-control speed"><img class="icon" alt="Speed" src="data:image/svg+xml;base64,PCEtLSBAbGljZW5zZSBsdWNpZGUtc3RhdGljIHYwLjUyMi4wIC0gSVNDIC0tPgo8c3ZnCiAgY2xhc3M9Imx1Y2lkZSBsdWNpZGUtc25haWwiCiAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iY3VycmVudENvbG9yIgogIHN0cm9rZS13aWR0aD0iMiIKICBzdHJva2UtbGluZWNhcD0icm91bmQiCiAgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIKPgogIDxwYXRoIGQ9Ik0yIDEzYTYgNiAwIDEgMCAxMiAwIDQgNCAwIDEgMC04IDAgMiAyIDAgMCAwIDQgMCIgLz4KICA8Y2lyY2xlIGN4PSIxMCIgY3k9IjEzIiByPSI4IiAvPgogIDxwYXRoIGQ9Ik0yIDIxaDEyYzQuNCAwIDgtMy42IDgtOFY3YTIgMiAwIDEgMC00IDB2NiIgLz4KICA8cGF0aCBkPSJNMTggMyAxOS4xIDUuMiIgLz4KICA8cGF0aCBkPSJNMjIgMyAyMC45IDUuMiIgLz4KPC9zdmc+Cg=="></div></div><div class="connection-indicator"></div><script>class $645f5579e73963d8$export$1c6db324fc104d40{constructor(){this.listeners={},this.websocket=null}on(e,c){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(c)}off(e,c){this.listeners[e]&&(this.listeners[e]=this.listeners[e].filter((e=>e!==c)))}emit(e,c){this.listeners[e]&&this.listeners[e].forEach((e=>e(c)))}send(e){this.websocket&&this.websocket.readyState===WebSocket.OPEN?this.websocket.send(JSON.stringify(e)):console.error("WebSocket is not open. Cannot send data.")}processChunk(e){try{const c=e,a=c.object;if("boost.listener.event"===a)return this.handleBoostEvent(c);this.emit(a,c)}catch(e){console.error("Error processing chunk:",e)}}handleBoostEvent(e){const{event:c,data:a}=e;this.emit(c,a)}getChunkContent(e){return e.choices.map((e=>e.delta.content)).join("\n")}async listen(){try{const e="<<listener_id>>";this.websocket=new WebSocket(`ws://localhost:34131/events/${e}/ws`,[]),this.websocket.onopen=()=>{this.emit("local.open",{})},this.websocket.onmessage=e=>{const c=e.data,a=JSON.parse(c);this.processChunk(a)},this.websocket.onclose=()=>{this.emit("local.close",{})},this.websocket.onerror=e=>{this.emit("local.error",{error:e})}}catch(e){console.error("Error connecting to event stream:",e)}}}const $d2724f24342ce62c$var$listener=new $645f5579e73963d8$export$1c6db324fc104d40,$d2724f24342ce62c$var$canvas=document.getElementById("moodCanvas"),$d2724f24342ce62c$var$ctx=$d2724f24342ce62c$var$canvas.getContext("2d"),$d2724f24342ce62c$var$valueListElement=document.getElementById("emotionValueList"),$d2724f24342ce62c$var$CONSTANTS={HANDLE_RADIUS:10,EMOTION_ICON_RADIUS:15,ICON_FONT_BASE_SIZE:20,ICON_FONT_SCALE_MAX_ADDITION:20,PLACEMENT_RADIUS_FACTOR:.7,INFLUENCE_RADIUS_FACTOR:.35,LERP_SPEED:.02,POSITION_LERP_SPEED:.12,MIN_DELTA:.001,PAUSE_ICON:"https://unpkg.com/lucide-static@latest/icons/pause.svg",PLAY_ICON:"https://unpkg.com/lucide-static@latest/icons/play.svg",SLOW_ICON:"https://unpkg.com/lucide-static@latest/icons/snail.svg",FAST_ICON:"https://unpkg.com/lucide-static@latest/icons/rabbit.svg"},$d2724f24342ce62c$var$emotions=[{name:"Happiness",icon:"😄",color:"#FFD700",isNeutral:!1},{name:"Love",icon:"❤️",color:"#FF69B4",isNeutral:!1},{name:"Desire",icon:"🔥",color:"#FF4500",isNeutral:!1},{name:"Surprise",icon:"😲",color:"#FFFF00",isNeutral:!1},{name:"Confusion",icon:"😕",color:"#D3D3D3",isNeutral:!1},{name:"Sarcasm",icon:"😏",color:"#008080",isNeutral:!1},{name:"Anger",icon:"😠",color:"#DC143C",isNeutral:!1},{name:"Disgust",icon:"🤢",color:"#556B2F",isNeutral:!1},{name:"Fear",icon:"😱",color:"#800080",isNeutral:!1},{name:"Sadness",icon:"😢",color:"#1E90FF",isNeutral:!1},{name:"Guilt",icon:"😔",color:"#6A5ACD",isNeutral:!1},{name:"Shame",icon:"🙈",color:"#A0522D",isNeutral:!1},{name:"Neutral",icon:"😐",color:"#808080",isNeutral:!0}];let $d2724f24342ce62c$var$state={handlePos:{x:0,y:0},targetHandlePos:{x:0,y:0},isDraggingHandle:!1,draggedEmotion:null,dragOffset:{x:0,y:0},smoothedEmotionValues:{},lastUpdateTime:0,paused:!1,speed:"slow"};const $d2724f24342ce62c$var$emotionAnchors=[];function $d2724f24342ce62c$var$resizeCanvas(){const e=document.getElementById("controllerContainer");$d2724f24342ce62c$var$canvas.width=e.clientWidth,$d2724f24342ce62c$var$canvas.height=e.clientHeight}function $d2724f24342ce62c$var$getCenterX(){return $d2724f24342ce62c$var$canvas.width/2}function $d2724f24342ce62c$var$getCenterY(){return $d2724f24342ce62c$var$canvas.height/2}function $d2724f24342ce62c$var$lerp(e,c,a){return e+(c-e)*a}function $d2724f24342ce62c$var$calculateDistance(e,c){return Math.sqrt(Math.pow(e.x-c.x,2)+Math.pow(e.y-c.y,2))}function $d2724f24342ce62c$var$getMousePos(e){const c=$d2724f24342ce62c$var$canvas.getBoundingClientRect();return{x:e.clientX-c.left,y:e.clientY-c.top}}function $d2724f24342ce62c$var$setupEmotionAnchors(){$d2724f24342ce62c$var$emotionAnchors.length=0;const e=$d2724f24342ce62c$var$emotions.filter((e=>!e.isNeutral)),c=$d2724f24342ce62c$var$getCenterX(),a=$d2724f24342ce62c$var$getCenterY(),$=Math.min(c,a)*$d2724f24342ce62c$var$CONSTANTS.PLACEMENT_RADIUS_FACTOR,t=Math.min($d2724f24342ce62c$var$canvas.width,$d2724f24342ce62c$var$canvas.height)*$d2724f24342ce62c$var$CONSTANTS.INFLUENCE_RADIUS_FACTOR;let r=0;$d2724f24342ce62c$var$emotions.forEach((s=>{let d,n;if(s.isNeutral)d=c,n=a;else{const t=r/e.length*2*Math.PI;d=c+$*Math.cos(t),n=a+$*Math.sin(t),r++}$d2724f24342ce62c$var$emotionAnchors.push({...s,x:d,y:n,targetX:d,targetY:n,displayX:d,displayY:n,D_influence:t})}))}function $d2724f24342ce62c$var$calculateEmotionValues(){const e={},c=$d2724f24342ce62c$var$state.isDraggingHandle?$d2724f24342ce62c$var$state.targetHandlePos:$d2724f24342ce62c$var$state.handlePos;return $d2724f24342ce62c$var$emotionAnchors.forEach((a=>{const $=$d2724f24342ce62c$var$state.draggedEmotion===a&&void 0!==a.targetX&&void 0!==a.targetY?{x:a.targetX,y:a.targetY}:{x:a.x,y:a.y},t=$d2724f24342ce62c$var$calculateDistance(c,$);if(t<=$d2724f24342ce62c$var$CONSTANTS.EMOTION_ICON_RADIUS)e[a.name]=1;else if(t<=a.D_influence){const c=1-(t-$d2724f24342ce62c$var$CONSTANTS.EMOTION_ICON_RADIUS)/(a.D_influence-$d2724f24342ce62c$var$CONSTANTS.EMOTION_ICON_RADIUS);e[a.name]=Math.max(0,c)}else e[a.name]=0})),e}function $d2724f24342ce62c$var$updateValueDisplay(e){$d2724f24342ce62c$var$valueListElement.innerHTML="",$d2724f24342ce62c$var$emotions.forEach((c=>{const a=e[c.name]||0,$=document.createElement("li");$.classList.add("emotion-value-item");const t=c.isNeutral?c.color:$d2724f24342ce62c$var$emotionAnchors.find((e=>e.name===c.name))?.color||"#4CAF50";$.innerHTML=`\n          <span class="emotion-icon">${c.icon}</span>\n          <span class="emotion-name">${c.name}</span>\n          <div class="emotion-bar-container">\n            <div class="emotion-bar" style="width: ${100*a}%; background-color: ${t};"></div>\n          </div>\n          <span class="emotion-value-text">${a.toFixed(2)}</span>\n        `,$d2724f24342ce62c$var$valueListElement.appendChild($)}))}function $d2724f24342ce62c$var$draw(e){$d2724f24342ce62c$var$ctx.clearRect(0,0,$d2724f24342ce62c$var$canvas.width,$d2724f24342ce62c$var$canvas.height),$d2724f24342ce62c$var$emotionAnchors.forEach((c=>{const a=e&&e[c.name]||0,$=$d2724f24342ce62c$var$CONSTANTS.ICON_FONT_BASE_SIZE+a*$d2724f24342ce62c$var$CONSTANTS.ICON_FONT_SCALE_MAX_ADDITION,t=$d2724f24342ce62c$var$CONSTANTS.EMOTION_ICON_RADIUS+a*$d2724f24342ce62c$var$CONSTANTS.EMOTION_ICON_RADIUS*1.2,r=$d2724f24342ce62c$var$state.draggedEmotion===c?.7:.4,s=Math.min(.9,r+.5*a),d=(e=>{const c=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return c?{r:parseInt(c[1],16),g:parseInt(c[2],16),b:parseInt(c[3],16)}:null})(c.color);if(d){const e=a,c=(d.r+d.g+d.b)/3,$=c+(d.r-c)*e,t=c+(d.g-c)*e,r=c+(d.b-c)*e;$d2724f24342ce62c$var$ctx.fillStyle=`rgba(${Math.round($)}, ${Math.round(t)}, ${Math.round(r)}, ${s})`}$d2724f24342ce62c$var$ctx.beginPath(),$d2724f24342ce62c$var$ctx.arc(c.displayX,c.displayY,t,0,2*Math.PI),$d2724f24342ce62c$var$ctx.fill(),a>.05&&($d2724f24342ce62c$var$ctx.shadowColor=c.color,$d2724f24342ce62c$var$ctx.shadowBlur=40*a*a,$d2724f24342ce62c$var$ctx.fill(),$d2724f24342ce62c$var$ctx.shadowBlur=25*a,$d2724f24342ce62c$var$ctx.fill(),$d2724f24342ce62c$var$ctx.shadowBlur=12*a,$d2724f24342ce62c$var$ctx.fill(),$d2724f24342ce62c$var$ctx.shadowBlur=0,$d2724f24342ce62c$var$ctx.shadowColor="transparent"),$d2724f24342ce62c$var$ctx.font=`${$}px Arial`,$d2724f24342ce62c$var$ctx.textAlign="center",$d2724f24342ce62c$var$ctx.textBaseline="middle";const n=Math.round(120*a);$d2724f24342ce62c$var$ctx.filter=`saturate(${n}%)`,$d2724f24342ce62c$var$ctx.shadowColor="rgba(0, 0, 0, 0.8)",$d2724f24342ce62c$var$ctx.shadowBlur=3,$d2724f24342ce62c$var$ctx.shadowOffsetX=1,$d2724f24342ce62c$var$ctx.shadowOffsetY=1,$d2724f24342ce62c$var$ctx.fillStyle="#ffffff",$d2724f24342ce62c$var$ctx.fillText(c.icon,c.displayX,c.displayY+2),$d2724f24342ce62c$var$ctx.filter="none",$d2724f24342ce62c$var$ctx.shadowColor="transparent",$d2724f24342ce62c$var$ctx.shadowBlur=0,$d2724f24342ce62c$var$ctx.shadowOffsetX=0,$d2724f24342ce62c$var$ctx.shadowOffsetY=0})),void 0!==$d2724f24342ce62c$var$state.handlePos.x&&void 0!==$d2724f24342ce62c$var$state.handlePos.y||($d2724f24342ce62c$var$state.handlePos={x:$d2724f24342ce62c$var$getCenterX(),y:$d2724f24342ce62c$var$getCenterY()}),$d2724f24342ce62c$var$ctx.beginPath(),$d2724f24342ce62c$var$ctx.arc($d2724f24342ce62c$var$state.handlePos.x,$d2724f24342ce62c$var$state.handlePos.y,$d2724f24342ce62c$var$CONSTANTS.HANDLE_RADIUS,0,2*Math.PI),$d2724f24342ce62c$var$ctx.fillStyle="rgba(100, 200, 255, 0.9)",$d2724f24342ce62c$var$ctx.fill(),$d2724f24342ce62c$var$ctx.shadowColor="rgba(100, 200, 255, 0.5)",$d2724f24342ce62c$var$ctx.shadowBlur=15,$d2724f24342ce62c$var$ctx.fill(),$d2724f24342ce62c$var$ctx.shadowBlur=0,$d2724f24342ce62c$var$ctx.strokeStyle="rgba(150, 220, 255, 0.9)",$d2724f24342ce62c$var$ctx.lineWidth=2,$d2724f24342ce62c$var$ctx.stroke()}function $d2724f24342ce62c$var$handleMouseDown(e){const c=$d2724f24342ce62c$var$getMousePos(e);for(let e=$d2724f24342ce62c$var$emotionAnchors.length-1;e>=0;e--){const a=$d2724f24342ce62c$var$emotionAnchors[e];if($d2724f24342ce62c$var$calculateDistance(c,{x:a.displayX,y:a.displayY})<=$d2724f24342ce62c$var$CONSTANTS.EMOTION_ICON_RADIUS)return $d2724f24342ce62c$var$state.draggedEmotion=a,$d2724f24342ce62c$var$state.dragOffset.x=c.x-a.displayX,$d2724f24342ce62c$var$state.dragOffset.y=c.y-a.displayY,$d2724f24342ce62c$var$state.isDraggingHandle=!1,void($d2724f24342ce62c$var$canvas.style.cursor="grabbing")}$d2724f24342ce62c$var$calculateDistance(c,$d2724f24342ce62c$var$state.handlePos)<=$d2724f24342ce62c$var$CONSTANTS.HANDLE_RADIUS?($d2724f24342ce62c$var$state.isDraggingHandle=!0,$d2724f24342ce62c$var$state.draggedEmotion=null,$d2724f24342ce62c$var$state.dragOffset.x=c.x-$d2724f24342ce62c$var$state.handlePos.x,$d2724f24342ce62c$var$state.dragOffset.y=c.y-$d2724f24342ce62c$var$state.handlePos.y,$d2724f24342ce62c$var$canvas.style.cursor="grabbing"):($d2724f24342ce62c$var$state.isDraggingHandle=!0,$d2724f24342ce62c$var$state.draggedEmotion=null,$d2724f24342ce62c$var$state.handlePos.x=c.x,$d2724f24342ce62c$var$state.handlePos.y=c.y,$d2724f24342ce62c$var$state.targetHandlePos.x=c.x,$d2724f24342ce62c$var$state.targetHandlePos.y=c.y,$d2724f24342ce62c$var$state.dragOffset.x=0,$d2724f24342ce62c$var$state.dragOffset.y=0,$d2724f24342ce62c$var$canvas.style.cursor="grabbing")}function $d2724f24342ce62c$var$handleMouseMove(e){const c=$d2724f24342ce62c$var$getMousePos(e);if($d2724f24342ce62c$var$state.draggedEmotion){const e=c.x-$d2724f24342ce62c$var$state.dragOffset.x,a=c.y-$d2724f24342ce62c$var$state.dragOffset.y,$=Math.max($d2724f24342ce62c$var$CONSTANTS.EMOTION_ICON_RADIUS,Math.min($d2724f24342ce62c$var$canvas.width-$d2724f24342ce62c$var$CONSTANTS.EMOTION_ICON_RADIUS,e)),t=Math.max($d2724f24342ce62c$var$CONSTANTS.EMOTION_ICON_RADIUS,Math.min($d2724f24342ce62c$var$canvas.height-$d2724f24342ce62c$var$CONSTANTS.EMOTION_ICON_RADIUS,a));$d2724f24342ce62c$var$state.draggedEmotion.targetX||($d2724f24342ce62c$var$state.draggedEmotion.targetX=$d2724f24342ce62c$var$state.draggedEmotion.x),$d2724f24342ce62c$var$state.draggedEmotion.targetY||($d2724f24342ce62c$var$state.draggedEmotion.targetY=$d2724f24342ce62c$var$state.draggedEmotion.y),$d2724f24342ce62c$var$state.draggedEmotion.targetX=$,$d2724f24342ce62c$var$state.draggedEmotion.targetY=t,$d2724f24342ce62c$var$canvas.style.cursor="grabbing";$d2724f24342ce62c$var$updateValueDisplay($d2724f24342ce62c$var$calculateEmotionValues())}else if($d2724f24342ce62c$var$state.isDraggingHandle){const e=c.x-$d2724f24342ce62c$var$state.dragOffset.x,a=c.y-$d2724f24342ce62c$var$state.dragOffset.y,$=Math.max($d2724f24342ce62c$var$CONSTANTS.HANDLE_RADIUS,Math.min($d2724f24342ce62c$var$canvas.width-$d2724f24342ce62c$var$CONSTANTS.HANDLE_RADIUS,e)),t=Math.max($d2724f24342ce62c$var$CONSTANTS.HANDLE_RADIUS,Math.min($d2724f24342ce62c$var$canvas.height-$d2724f24342ce62c$var$CONSTANTS.HANDLE_RADIUS,a));$d2724f24342ce62c$var$state.targetHandlePos.x=$,$d2724f24342ce62c$var$state.targetHandlePos.y=t,$d2724f24342ce62c$var$canvas.style.cursor="grabbing";$d2724f24342ce62c$var$updateValueDisplay($d2724f24342ce62c$var$calculateEmotionValues())}else{let e=!1;for(const a of $d2724f24342ce62c$var$emotionAnchors)if($d2724f24342ce62c$var$calculateDistance(c,{x:a.displayX,y:a.displayY})<=$d2724f24342ce62c$var$CONSTANTS.EMOTION_ICON_RADIUS){$d2724f24342ce62c$var$canvas.style.cursor="grab",e=!0;break}!e&&$d2724f24342ce62c$var$calculateDistance(c,$d2724f24342ce62c$var$state.handlePos)<=$d2724f24342ce62c$var$CONSTANTS.HANDLE_RADIUS&&($d2724f24342ce62c$var$canvas.style.cursor="grab",e=!0),e||($d2724f24342ce62c$var$canvas.style.cursor="pointer")}}function $d2724f24342ce62c$var$handleMouseUp(){$d2724f24342ce62c$var$state.isDraggingHandle=!1,$d2724f24342ce62c$var$state.draggedEmotion=null,$d2724f24342ce62c$var$canvas.style.cursor="pointer",$d2724f24342ce62c$var$updateAndDraw()}function $d2724f24342ce62c$var$updateAndDraw(){const e=$d2724f24342ce62c$var$calculateEmotionValues();$d2724f24342ce62c$var$updateValueDisplay(e),$d2724f24342ce62c$var$draw(e)}function $d2724f24342ce62c$var$handleResize(){$d2724f24342ce62c$var$resizeCanvas(),$d2724f24342ce62c$var$setupEmotionAnchors();const e=$d2724f24342ce62c$var$emotionAnchors.find((e=>e.isNeutral));if(e)$d2724f24342ce62c$var$state.handlePos={x:e.x,y:e.y},$d2724f24342ce62c$var$state.targetHandlePos={x:e.x,y:e.y};else{const e=$d2724f24342ce62c$var$getCenterX(),c=$d2724f24342ce62c$var$getCenterY();$d2724f24342ce62c$var$state.handlePos={x:e,y:c},$d2724f24342ce62c$var$state.targetHandlePos={x:e,y:c}}$d2724f24342ce62c$var$state.smoothedEmotionValues=$d2724f24342ce62c$var$calculateEmotionValues(),$d2724f24342ce62c$var$updateAndDraw()}function $d2724f24342ce62c$var$updateLoop(e){$d2724f24342ce62c$var$state.lastUpdateTime;$d2724f24342ce62c$var$state.lastUpdateTime=e;let c=!1;const a=Math.abs($d2724f24342ce62c$var$state.handlePos.x-$d2724f24342ce62c$var$state.targetHandlePos.x),$=Math.abs($d2724f24342ce62c$var$state.handlePos.y-$d2724f24342ce62c$var$state.targetHandlePos.y);(a>$d2724f24342ce62c$var$CONSTANTS.MIN_DELTA||$>$d2724f24342ce62c$var$CONSTANTS.MIN_DELTA)&&($d2724f24342ce62c$var$state.handlePos.x=$d2724f24342ce62c$var$lerp($d2724f24342ce62c$var$state.handlePos.x,$d2724f24342ce62c$var$state.targetHandlePos.x,$d2724f24342ce62c$var$CONSTANTS.POSITION_LERP_SPEED),$d2724f24342ce62c$var$state.handlePos.y=$d2724f24342ce62c$var$lerp($d2724f24342ce62c$var$state.handlePos.y,$d2724f24342ce62c$var$state.targetHandlePos.y,$d2724f24342ce62c$var$CONSTANTS.POSITION_LERP_SPEED),c=!0),$d2724f24342ce62c$var$emotionAnchors.forEach((e=>{if(void 0!==e.targetX&&void 0!==e.targetY){const a=Math.abs(e.x-e.targetX),$=Math.abs(e.y-e.targetY);(a>$d2724f24342ce62c$var$CONSTANTS.MIN_DELTA||$>$d2724f24342ce62c$var$CONSTANTS.MIN_DELTA)&&(e.x=$d2724f24342ce62c$var$lerp(e.x,e.targetX,$d2724f24342ce62c$var$CONSTANTS.POSITION_LERP_SPEED),e.y=$d2724f24342ce62c$var$lerp(e.y,e.targetY,$d2724f24342ce62c$var$CONSTANTS.POSITION_LERP_SPEED),c=!0)}const a=Math.abs(e.displayX-e.x),$=Math.abs(e.displayY-e.y);(a>$d2724f24342ce62c$var$CONSTANTS.MIN_DELTA||$>$d2724f24342ce62c$var$CONSTANTS.MIN_DELTA)&&(e.displayX=$d2724f24342ce62c$var$lerp(e.displayX,e.x,$d2724f24342ce62c$var$CONSTANTS.POSITION_LERP_SPEED),e.displayY=$d2724f24342ce62c$var$lerp(e.displayY,e.y,$d2724f24342ce62c$var$CONSTANTS.POSITION_LERP_SPEED),c=!0)}));const t=$d2724f24342ce62c$var$calculateEmotionValues(),r=$d2724f24342ce62c$var$calculateEmotionValues();let s=!1;for(const e in r){const c=r[e],a=$d2724f24342ce62c$var$state.smoothedEmotionValues[e]||0;Math.abs(a-c)>$d2724f24342ce62c$var$CONSTANTS.MIN_DELTA?($d2724f24342ce62c$var$state.smoothedEmotionValues[e]=$d2724f24342ce62c$var$lerp(a,c,$d2724f24342ce62c$var$CONSTANTS.LERP_SPEED),s=!0):$d2724f24342ce62c$var$state.smoothedEmotionValues[e]=c}(s||c||$d2724f24342ce62c$var$state.isDraggingHandle||$d2724f24342ce62c$var$state.draggedEmotion)&&($d2724f24342ce62c$var$updateValueDisplay(t),$d2724f24342ce62c$var$draw($d2724f24342ce62c$var$state.smoothedEmotionValues)),requestAnimationFrame($d2724f24342ce62c$var$updateLoop)}function $d2724f24342ce62c$var$serializeEmotionValues(){const e=$d2724f24342ce62c$var$calculateEmotionValues();return JSON.stringify(Object.fromEntries(Object.entries(e).map((([e,c])=>[e,parseFloat(c.toFixed(2))]))))}async function $d2724f24342ce62c$var$init(){$d2724f24342ce62c$var$resizeCanvas(),$d2724f24342ce62c$var$setupEmotionAnchors();const e=$d2724f24342ce62c$var$emotionAnchors.find((e=>e.isNeutral));e?($d2724f24342ce62c$var$state.handlePos={x:e.x,y:e.y},$d2724f24342ce62c$var$state.targetHandlePos={x:e.x,y:e.y}):($d2724f24342ce62c$var$state.handlePos={x:$d2724f24342ce62c$var$getCenterX(),y:$d2724f24342ce62c$var$getCenterY()},$d2724f24342ce62c$var$state.targetHandlePos={x:$d2724f24342ce62c$var$state.handlePos.x,y:$d2724f24342ce62c$var$state.handlePos.y}),$d2724f24342ce62c$var$emotionAnchors.forEach((e=>{e.targetX=e.x,e.targetY=e.y,e.displayX=e.x,e.displayY=e.y})),$d2724f24342ce62c$var$state.smoothedEmotionValues=$d2724f24342ce62c$var$calculateEmotionValues(),$d2724f24342ce62c$var$updateAndDraw(),$d2724f24342ce62c$var$state.lastUpdateTime=performance.now(),requestAnimationFrame($d2724f24342ce62c$var$updateLoop);const c=document.querySelector(".boost-control.play-pause");c.addEventListener("click",(()=>{$d2724f24342ce62c$var$state.paused?($d2724f24342ce62c$var$state.paused=!1,c?.firstChild?.setAttribute("src",$d2724f24342ce62c$var$CONSTANTS.PAUSE_ICON),$d2724f24342ce62c$var$listener.send({event:"boost.resume"})):($d2724f24342ce62c$var$state.paused=!0,c?.firstChild?.setAttribute("src",$d2724f24342ce62c$var$CONSTANTS.PLAY_ICON),$d2724f24342ce62c$var$listener.send({event:"boost.pause"}))}));const a=document.querySelector(".boost-control.speed");a.addEventListener("click",(()=>{"slow"===$d2724f24342ce62c$var$state.speed?($d2724f24342ce62c$var$state.speed="fast",a?.firstChild?.setAttribute("src",$d2724f24342ce62c$var$CONSTANTS.FAST_ICON),$d2724f24342ce62c$var$listener.send({event:"boost.speed",data:"fast"})):($d2724f24342ce62c$var$state.speed="slow",a?.firstChild?.setAttribute("src",$d2724f24342ce62c$var$CONSTANTS.SLOW_ICON),$d2724f24342ce62c$var$listener.send({event:"boost.speed",data:"slow"}))}));const $=document.querySelector(".connection-indicator");$d2724f24342ce62c$var$listener.on("boost.status",(({status:e})=>{Array.from(document.querySelectorAll(".boost-status")).forEach(((c,a)=>{0===a?c.textContent=e:c.remove()}))})),$d2724f24342ce62c$var$listener.on("local.open",(()=>{$.classList.add("connected"),$.classList.remove("disconnected")})),$d2724f24342ce62c$var$listener.on("local.close",(()=>{$.classList.remove("connected"),$.classList.add("disconnected")})),$d2724f24342ce62c$var$listener.on("local.error",(()=>{$.classList.remove("connected"),$.classList.add("disconnected")}));let t=$d2724f24342ce62c$var$serializeEmotionValues();setInterval((()=>{const e=$d2724f24342ce62c$var$serializeEmotionValues();e!==t&&($d2724f24342ce62c$var$listener.send({event:"boost.emotion_values",data:JSON.parse(e)}),t=e)}),100),await $d2724f24342ce62c$var$listener.listen(),requestAnimationFrame((()=>$d2724f24342ce62c$var$handleResize()))}$d2724f24342ce62c$var$canvas.addEventListener("mousedown",$d2724f24342ce62c$var$handleMouseDown),$d2724f24342ce62c$var$canvas.addEventListener("mousemove",$d2724f24342ce62c$var$handleMouseMove),$d2724f24342ce62c$var$canvas.addEventListener("mouseup",$d2724f24342ce62c$var$handleMouseUp),window.addEventListener("resize",$d2724f24342ce62c$var$handleResize),$d2724f24342ce62c$var$init().catch(console.error)</script></body></html>