### [sist2](https://github.com/simon987/sist2)

> Handle: `sist2`<br/>
> URL: [http://localhost:34651](http://localhost:34651) (Admin UI) | [http://localhost:34652](http://localhost:34652) (Search UI)

sist2 is a lightning-fast file system indexer and search tool. It indexes local files and extracts text/metadata from 100+ formats including PDFs, images, audio, video, archives, and office documents.

**Key Features:**
- **Format support**: Indexes 100+ file formats (PDF, images, audio, video, archives, office docs)
- **OCR support**: Tesseract OCR for images and scanned PDFs
- **Embeddings**: User scripts for CLIP (images) and Whisper (audio)
- **Two UIs**: Admin UI for managing scan jobs, Search UI for querying content
- **Search backends**: SQLite (default, simpler) or Elasticsearch (full-featured)

## Starting

```bash
# Configure paths to scan (at least one required)
harbor sist2 paths add ~/Downloads

# Pull the images
harbor pull sist2

# Start sist2
harbor up sist2 --open
```

## Usage

1. Add directories to scan using `harbor sist2 paths add <path>`
2. Each path is mounted read-only at `/host/<dirname>` inside the container
3. Open Admin UI at [localhost:34651](http://localhost:34651) to configure and manage tasks
4. Create a **Scan** task pointing to directories under `/host/` (e.g., `/host/Downloads`)
5. Run the Scan task to create a `.sist2` index file
6. Create a **SQLite Index** task using the scan output to build a search index
7. Create a **Web** task using both the scan and search index files
8. Start the Web task - this launches the Search UI at [localhost:34652](http://localhost:34652)

## CLI

```bash
# List configured scan paths
harbor sist2 paths

# Add a path to scan
harbor sist2 paths add /home/user/Downloads
harbor sist2 paths add /home/user/Documents
harbor sist2 paths add /mnt/media

# Remove a path
harbor sist2 paths rm /home/user/Downloads

# Remove a path by index
harbor sist2 paths rm 0

# Clear all paths
harbor sist2 paths clear
```

Each path is mounted under `/host/<basename>`. If multiple paths share the same basename (e.g., `/home/user/Downloads` and `/tmp/Downloads`), they're numbered automatically (`/host/Downloads`, `/host/Downloads_1`).

## Configuration

### Environment Variables

Following options can be set via [`harbor config`](./3.-Harbor-CLI-Reference.md#harbor-config):

```bash
# Admin UI port
HARBOR_SIST2_HOST_PORT             34651

# Search UI port
HARBOR_SIST2_SEARCH_PORT           34652

# Docker image
HARBOR_SIST2_IMAGE                 sist2app/sist2
HARBOR_SIST2_VERSION               x64-linux

# Workspace directory for persistent data
HARBOR_SIST2_WORKSPACE             ./sist2/data

# Paths to scan (semicolon-separated, managed via CLI)
HARBOR_SIST2_SCAN_PATHS            ""

# Elasticsearch JVM options (when using ES backend)
HARBOR_SIST2_ES_JAVA_OPTS          -Xms1g -Xmx1g

# URL opened by harbor open command
HARBOR_SIST2_OPEN_URL              http://localhost:34651
```

### Volumes

sist2 persists data in the following directories:
- `sist2/data/` - Contains sist2-admin state, indexes, logs, and user scripts
- `sist2/data/scripts/` - User scripts for embeddings (CLIP, Whisper)

### Search Backends

**SQLite (default):**
- Simpler setup, no dependencies
- Good for personal use

**Elasticsearch (optional):**
- Full-featured search capabilities
- Enable by manually creating a cross-file at `compose.x.sist2.elasticsearch.yml`

### Embeddings

sist2 uses its own local ML models (CLIP for images, Whisper for audio) via user scripts. These are independent from Harbor's Ollama or other LLM services and cannot be integrated with them due to different APIs.

## Troubleshooting

### Check Logs

```bash
harbor logs sist2
```

### Verify Mounted Path

```bash
harbor exec sist2 ls /host
```

### Scan Path Not Set

If sist2 starts but has no directories to scan, add paths:

```bash
harbor sist2 paths add /path/to/files
harbor restart sist2
```

Verify mounted paths inside the container:

```bash
harbor exec sist2 ls /host
```

## Links

- [GitHub Repository](https://github.com/simon987/sist2)
- [Docker Image](https://hub.docker.com/r/sist2app/sist2)
