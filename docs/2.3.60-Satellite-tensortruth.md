### [TensorTruth](https://github.com/ljubobratovicrelja/tensor-truth)

> Handle: `tensortruth`<br/>
> URL: [http://localhost:34621](http://localhost:34621)

TensorTruth is a tool for analyzing and visualizing tensor data, specifically designed to help understand and debug LLM internal states.

#### Starting

```bash
# [Optional] Pre-build the image
harbor build tensortruth

# Start the service
harbor up tensortruth

# Open in browser
harbor open tensortruth
```

- ⚠️ Upon the first start:
 - `tensortruth` will download default indices from HuggingFace (~4 GB)
 - you'll need to configure default LLM for the chat sessions, this can be done in the "Configure new session" panel.
- Harbor will pre-connect `tensortruth` to `ollama` if both services are started together.


#### CLI Tools

TensorTruth provides CLI tools for building custom knowledge bases. These tools require the service to be running.

##### Scraping Documentation

The `docs` command scrapes documentation from various sources and prepares them for indexing.

```bash
# List all available documentation sources
harbor tensortruth docs --list

# Scrape documentation for specific libraries
harbor tensortruth docs pytorch numpy

# Scrape documentation for multiple libraries at once
harbor tensortruth docs transformers datasets accelerate
```

##### Managing Papers

The `papers` command manages research papers for your knowledge base.

```bash
# List available paper categories
harbor tensortruth papers --list

# Fetch papers from a specific category
harbor tensortruth papers --category dl_foundations

# Fetch specific papers by arXiv ID
harbor tensortruth papers --category ml --ids 1706.03762 1810.04805

# Fetch papers from multiple categories
harbor tensortruth papers --category cv --category nlp
```

##### Building Vector Indexes

The `build` command creates vector indexes from the scraped documentation and papers.

```bash
# Build indexes for specific modules
harbor tensortruth build --modules pytorch

# Build indexes for multiple modules
harbor tensortruth build --modules numpy scipy matplotlib
```

##### Session PDFs

In addition to the CLI tools, you can upload PDFs directly in the web UI to create per-session indexes. Currently, only standard PDF files are supported, though more formats may be added in the future.

#### Configuration

##### Environment Variables

The following options can be set via [`harbor config`](./3.-Harbor-CLI-Reference.md#harbor-config) or in `tensortruth/override.env`:

```bash
# Main UI port
HARBOR_TENSORTRUTH_HOST_PORT         34621

# Docker image settings
HARBOR_TENSORTRUTH_IMAGE             ljubobratovicrelja/tensor-truth
HARBOR_TENSORTRUTH_VERSION           latest

# Data directory
HARBOR_TENSORTRUTH_CACHE             ./tensortruth/data
```

##### Integration with Harbor's Ollama

TensorTruth is designed to work with Ollama. To connect it to Harbor's Ollama service:

```bash
harbor up tensortruth ollama
```
