# Harbor Service Configuration for Dify2
# This file configures how Harbor manages this service

# Upstream compose transformation
# Allows using stock Docker Compose files with automatic Harbor integration
upstream:
  # Path to stock compose file (relative to this directory)
  source: ./upstream/docker/docker-compose.yaml

  # Namespace for isolation
  # Creates internal network where services use original names (api, db, redis)
  # Exposed services get prefixed alias on harbor-network (dify2-api, dify2-web)
  namespace: dify2

  # Services to include/exclude from stock compose
  services:
    exclude:
      - nginx
      - certbot

  # Services exposed on harbor-network with {namespace}-{service} alias
  # Other services stay internal-only (no conflicts with other Harbor services)
  expose:
    - api
    - web

# Future sections (not yet implemented):
# metadata:
#   tags: [backend, api]
#   wikiUrl: https://github.com/av/harbor/wiki/dify2
#
# configs:
#   base: ./configs/config.yml
#   cross:
#     ollama: ./configs/config.ollama.yml
